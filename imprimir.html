<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=60mm, initial-scale=1.0"> <!-- Cambia el ancho de la vista para el papel de 58mm -->
    <title>Recibo</title>
    <style>
        body {
            font-family: tahoma, Helvetica, sans-serif; /* Ajuste de fuente */
            margin: 0;
            padding: 0;
            text-align: center;
            font-size: 3mm; /* Tamaño de letra similar al primer código */
        }

        .recibo {
            max-width: 60mm; /* Ancho máximo similar al primer código */
            margin: auto; /* Centrar en la página */
        }

        .header, .footer, .items, .totals {
            text-align: center;
            font-weight: bold;
        }

        .details {
            text-align: left;
            font-weight: bold;
        }

        .header img {
            max-width: 50mm; /* Ajusta el tamaño de la imagen para que se ajuste al ancho de la impresora térmica */
        }

        .header p, .footer p, .signature p {
            margin: 0;
            padding: 1mm 0; /* Margen y padding similar al primer código */
        }

        .items {
            border-top: 1px dashed #000;
            padding-top: 2mm;
            margin-top: 2mm;
            border-top: 1px dashed #000;
        }



        .totals {
            border-top: 1px dashed #000;
            padding-top: 1mm;
            margin-top: 2mm;
        }

        .lastTotal {
            font-size: 5mm;
            text-align: center;
            font-weight: bold;
        }

        .totalsizquierdo {
            border-top: 1px dashed #000;
            padding-top: 1mm;
            margin-top: 2mm;
            text-align: right;
        }

        .totals td {
            text-align: center;
            font-size: 3mm; /* Tamaño de letra ajustado */
        }

        .totals .label {
            text-align: left;
        }

        .totals .labela {
            text-align: left;
        }

        .creditos {
            display: none;
            padding-top: 2mm;
            margin-top: 2mm;
        }

        .items th, .items td {
            text-align: left;
            font-size: 2mm; /* Tamaño de letra ajustado */
        }

        .items .pro{
            text-align: right;
            font-size: 2mm; /* Tamaño de letra ajustado */
        }



        .items th {
            font-weight: bold;
        }



        

        .signature {
            display: none;
            text-align: center;
            margin-top: 5mm;
            font-weight: bold;
        }


    </style>
</head>

<body>

    <div class="recibo">
        <div class="header">
            <img src="https://via.placeholder.com/150" alt="Logo de la tienda"> <!-- Ajusta la URL de la imagen según sea necesario -->
            <p id="direccion"></p>
            <p id="ciudad"></p>
            <p id="tipoTienda"></p>
            <p id="telefono"></p>
            <p id="instagram"></p>
        </div>
        
        <div class="details">
            <p id="noFactura"></p>

            <p id="tipoVenta">Tipo de Venta: </p>
            <p id="cliente">Cliente: </p>
            <p id="caja">Caja: </p>
            <p id="fecha">Fecha: </p>
            <p id="hora">Hora: </p>
        </div>

        <div class="items">
            <table width="100%" id="tablaItems">
                <tr>
                    <th>ITEM</th>
                    <th></th>
                    <th class="pro">TOTAL PRICE</th>
                </tr>
            </table>
        </div>
        

        <script>

            var nombreProducto = document.getElementById("nombreProducto")
            document.getElementById("cantidadProducto").innerHTML="<?= cantidadProducto ?>";
            document.getElementById("precioUnitProducto").innerHTML="<?= precioUnitProducto ?>";
            document.getElementById("precioTotalProducto").innerHTML="<?= precioTotalProducto ?>";

            var result = [];

            cantidades = cantidades.split(",");
            descripciones = descripciones.split(","); 
            p_units = p_units.split(",");

            cantidades.forEach(function(value, id) {
                result[id] = {
                    cantidad: cantidades[id],
                    descripcion: descripciones[id], // + " " + detalles[id], // Descomenta si deseas concatenar la descripción con el detalle
                    precio_unit: parseFloat(p_units[id]).toLocaleString('es-ES', { minimumFractionDigits: 0 }),
                };
            });
            // Ejemplo de datos, puedes reemplazarlo con datos dinámicos
            var result = [
                { cantidad: 1, descripcion: "Cambio de aceite", precio_unit: 250.00 },
                { cantidad: 2, descripcion: "Filtro de aire", precio_unit: 150.00 },
                { cantidad: 1, descripcion: "Revisión general", precio_unit: 300.00 }
            ];

            var tablaItems = document.getElementById("tablaItems");

            result.forEach(function(row) {
                var descripcionRow = document.createElement("tr");
                var cantidadRow = document.createElement("tr");

                descripcionRow.innerHTML = `
                    <td>${row.descripcion}</td>
                `;

                cantidadRow.innerHTML = `
                    <td>${row.cantidad}x ${row.precio_unit.toFixed(2)}</td>
                    <td></td>
                    <td class="pro">${row.precio_unit.toFixed(2)}</td>
                `;

                tablaItems.appendChild(descripcionRow);
                tablaItems.appendChild(cantidadRow);
            });
        </script>

        
        
        <div class="totalsizquierdo">
            <p id="subTotal" ></p>
            <p id="descuento" ></p>     
        </div>

        <div class="lastTotal">
            <p id="total" ></p>        
        </div>
        

        </br>

        <div id="creditos" class="creditos">
            <table width="100%">
                <tr>
                    <td class="label">Paid:</td>
                    <td>0.00</td>
                </tr>
                <tr>
                    <td class="label">Pending:</td>
                    <td><strong>250.00</strong></td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: center;">Please pay before: 31/08/2024</td>
                </tr>           

                
            </table>
            </br>
            </br>
            </br>
            </br>
            </br>
            </br>
        </div>

        


        
        <div id="signature" class="signature">
            <p>_______________________________________</p>
            <p>Paola Jimenez</p>
            </br>
            </br>
            </br>
        </div>
        
        <div class="footer">
            <p id="piePagina"></p>
            <p id="otroPie"></p>
        </div>
    </div>

    <script>
      document.getElementById("direccion").innerHTML="<?= direccion ?>";
      document.getElementById("ciudad").innerHTML="<?= ciudad ?>";
      document.getElementById("tipoTienda").innerHTML="<?= tipoTienda ?>";
      document.getElementById("telefono").innerHTML="<?= telefono ?>";
      document.getElementById("instagram").innerHTML="<?= instagram ?>";
      document.getElementById("noFactura").innerHTML="<?= noFactura ?>";
      document.getElementById("tipoVenta").innerHTML="<?= tipoVenta ?>";
      document.getElementById("caja").innerHTML="<?= caja ?>";
      document.getElementById("fecha").innerHTML="<?= fecha ?>";
      document.getElementById("hora").innerHTML="<?= hora ?>";
      document.getElementById("subTotal").innerHTML="<?= subTotal ?>";
      document.getElementById("descuento").innerHTML="<?= descuento ?>";
      document.getElementById("total").innerHTML="<?= total ?>";
      document.getElementById("piePagina").innerHTML="<?= piePagina ?>";
      document.getElementById("otroPie").innerHTML="<?= otroPie ?>";     
      
    </script>

    <script>
        var tipoVenta = document.getElementById("tipoVenta").textContent;

        if (tipoVenta.includes("Credito")) {
            document.getElementById("creditos").style.display = "block";
            document.getElementById("signature").style.display = "block";
        }
    // Condición que quieres evaluar
        //var condicion = false; // Puedes cambiar esta variable a false para probar

        // Mostrar u ocultar la sección basado en la condición
        //if (condicion) {
            //document.getElementById('creditos').style.display = "block";
            //document.getElementById('signature').style.display = "block";
        //}
    </script>

    <script>
      window.onload = function(){
        window.print();
      }
    </script>
</body>
</html>
